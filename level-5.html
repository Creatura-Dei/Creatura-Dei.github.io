<!DOCTYPE html>
<html lang="ru">
<head>
 <title>–ü–∞—Ä–æ—á–∫–∏ 6x8</title>
 <link href="/style.css" rel="stylesheet">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;500;700;900&display=swap" rel="stylesheet">
</head>

<body class="lvl5_back">

  <div class="overlay" style="background-color: #003528"></div>





  <span class="head_block head5">–ü–∞—Ä–æ—á–∫–∏</span>

  <div class="lvl_block" style="border: none; border-radius: 30px; outline: double 10px #3f7d58; outline-offset: -15px; background-color: #fffdf2;">
		<h2 class="title-4">–ü–∞—Ä–æ—á–∫–∏: –£—Ä–æ–≤–µ–Ω—å 5</h2>
		<p class="op-4">–≠—Ç–æ –∏–≥—Ä–∞ "–ù–∞–π–¥–∏ –ø–∞—Ä—É". <br>–£—á—Ç–∏: —ç–∫—Ä–∞–Ω –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è –≤–Ω–∏–∑! <br>–í—Å–µ–≥–æ –ø–∞—Ä—É –∫–∞—Ä—Ç–æ—á–µ–∫... –¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è! üòá</p>
		<button class="start-btn" onclick="openGame5()" style="margin-top: 70px; background-color: #3f7d58;">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
	</div>
	<button class="lobby_btn lobby_btn-5" onclick="window.location.href='lobby.html'">
		–í–µ—Ä–Ω—É—Ç—å—Å—è
	</button>

  <div class="memory-game-wrapper" id="gameContainer">
    <div id="game"></div>
    <button class="start-btn" style="margin-top: 20px;" onclick="init()">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
  </div>

  <div class="area">
    <ul class="circles">
      <li></li><li></li><li></li><li></li><li></li>
      <li></li><li></li><li></li><li></li><li></li>
    </ul>
  </div>




<div class="overlay5" id="gameOverlay5">
  <div class="game-modal5">
    <div class="game-board5" id="gameBoard5"></div>
    <button class="closebtn5" onclick="closeGame5()">–í—ã–π—Ç–∏</button>
  </div>
</div>

<div class="win-overlay5" id="winOverlay5">
  <div class="win-modal5">
    <h2>–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω! –ú–æ–ª–æ–¥–µ—Ü!</h2>
    <button class="start-btn5" onclick="closeWin()">OK</button>
  </div>
</div>

<div class="final-screen f5">
	<h2 class="final-message">–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω! –ú–æ–ª–æ–¥–µ—Ü!</h2>
	<div class="final-image-container" style="display: flex; justify-content: center; margin-top: 30px;">
		<img src="images/qr-5.png" alt="–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ!" class="final-image fi5">
	</div>
</div>
<script>
  const imageList5 = Array.from({ length: 35 }, (_, i) => `img${i + 1}.jpg`);
  const gameOverlay5 = document.getElementById('gameOverlay5');
  const gameBoard5 = document.getElementById('gameBoard5');

  let firstTile5 = null;
  let lockBoard5 = false;

  function openGame5() {
    gameOverlay5.classList.add('show5');
    initGame5();
  }

  function closeGame5() {
    gameOverlay5.classList.remove('show5');
    setTimeout(() => {
      gameBoard5.innerHTML = '';
    }, 500);
  }

  function shuffle5(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

	function initGame5() {
  firstTile5 = null;
  lockBoard5 = false;
  gameBoard5.innerHTML = '';

  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–∞—Ä—ã –∏ –¥–≤–∞–∂–¥—ã –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º
  const pairImages = imageList5.flatMap(img => [img, img]);
  const images = shuffle5(shuffle5(pairImages));

  images.forEach(src => {
    const tile = document.createElement('div');
    tile.className = 'tile5';
    tile.dataset.image = src;

    const front = document.createElement('div');
    front.className = 'front5';
    front.style.backgroundImage = `url("game/back.jpg")`;

    const back = document.createElement('div');
    back.className = 'back5';
    back.style.backgroundImage = `url("game/${src}")`;

    tile.appendChild(front);
    tile.appendChild(back);

    tile.addEventListener('click', () => flipTile5(tile));

    gameBoard5.appendChild(tile);
  });
}


  function flipTile5(tile) {
  if (lockBoard5 || tile.classList.contains('flipped5')) return;

  tile.classList.add('flipped5');

  if (!firstTile5) {
    firstTile5 = tile;
    return;
  }

  if (tile.dataset.image === firstTile5.dataset.image) {
    firstTile5 = null;

    // –£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã: –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç—ã
		if (document.querySelectorAll('.tile5.flipped5').length === 70) {
  setTimeout(() => {
    const finalScreen = document.querySelector('.final-screen');
    finalScreen.style.display = 'flex';

    // –°–æ–∑–¥–∞—ë–º –∫–Ω–æ–ø–∫—É
    const btn = document.createElement('button');
    btn.textContent = '‚Üê –ù–∞–∑–∞–¥ –≤ –ª–æ–±–±–∏';
    btn.className = 'floating-back-button';
    finalScreen.appendChild(btn);

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
    setTimeout(() => {
      btn.classList.add('show');
    }, 100);

    // –ù–∞–∑–∞–¥ –≤ –ª–æ–±–±–∏
    btn.addEventListener('click', () => {
      localStorage.setItem('level5Completed', 'true');
      window.location.href = 'lobby.html';
    });
  }, 500);
}

  } else {
    lockBoard5 = true;
    setTimeout(() => {
      tile.classList.remove('flipped5');
      firstTile5.classList.remove('flipped5');
      firstTile5 = null;
      lockBoard5 = false;
    }, 800);
  }
}


			// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
			document.getElementById('back-button').addEventListener('click', function() {
	// –ü–æ–º–µ—á–∞–µ–º —É—Ä–æ–≤–µ–Ω—å –∫–∞–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π
	localStorage.setItem('level5Completed', 'true');

	// –ü–æ—Ç–æ–º –∏–¥—ë–º –≤ –ª–æ–±–±–∏
	window.location.href = 'lobby.html'; // –∏–ª–∏ –∫—É–¥–∞ —É —Ç–µ–±—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
	});
</script>

</body>
</html>
